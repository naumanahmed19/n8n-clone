# Template Setup - Canvas Integration Guide

## ğŸ¯ Quick Access

### From Workflow Canvas (NEW! â­)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Workflow Editor                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [Save] [Execute] [...More]         â”‚ â”‚
â”‚  â”‚                      â†“              â”‚ â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚              â”‚ Workflow Settingsâ”‚   â”‚ â”‚
â”‚  â”‚              â”‚ Setup Template â­â”‚   â”‚ â”‚
â”‚  â”‚              â”‚ Import Workflow  â”‚   â”‚ â”‚
â”‚  â”‚              â”‚ Export Workflow  â”‚   â”‚ â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [Your Workflow Canvas]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Steps**:
1. Open workflow in editor
2. Click "..." (More Options) in toolbar
3. Click "Setup Template"
4. Configure and save
5. Done! âœ¨

---

## ğŸ”„ Complete Flow

### Step 1: Open Workflow
```
Workflows Page â†’ Click on workflow â†’ Opens in editor
```

### Step 2: Access Template Setup
```
Toolbar â†’ "..." â†’ "Setup Template"
```

### Step 3: Configure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Workflow Template                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ View Reqs   â”‚ Setup Configuration âœ“   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚ ğŸ”‘ Configure Credentials                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ OpenAI API Key          [Select â–¼]     â”‚â”‚
â”‚ â”‚ âœ… Configured                           â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â”‚ ğŸ”¤ Configure Variables                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ {{webhookUrl}}                          â”‚â”‚
â”‚ â”‚ [https://api.example.com/webhook]       â”‚â”‚
â”‚ â”‚ âœ… Set                                  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â”‚ [Cancel]              [Save Configuration] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4: Save & Reload
```
Click "Save Configuration"
  â†“
Success notification
  â†“
Page reloads automatically
  â†“
Configuration applied to nodes âœ…
```

### Step 5: Verify
```
Open any node â†’ Check parameters
  â†“
âœ… Credential selected in "Authentication"
âœ… Variables replaced with actual values
```

---

## ğŸ“Š Before vs After

### Before (Old Way)
```
1. Workflows Page
   â†“
2. Click "..." on workflow
   â†“
3. Select "Setup Template"
   â†“
4. Configure in dialog
   â†“
5. Save
   â†“
6. Close dialog
   â†“
7. Click workflow to open editor
   â†“
8. Check if it worked ğŸ¤
```

**Problems**:
- âŒ Multiple page navigations
- âŒ Context switching
- âŒ Unclear if changes applied
- âŒ Had to manually verify

### After (New Way)
```
1. Workflow Editor (already open)
   â†“
2. Click "..." â†’ "Setup Template"
   â†“
3. Configure in dialog
   â†“
4. Save
   â†“
5. Auto-reload with changes âœ…
```

**Benefits**:
- âœ… No page navigation
- âœ… Stay in context
- âœ… Immediate feedback
- âœ… Auto-verification

---

## ğŸ¨ Visual Indicators

### In Toolbar
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [...More Options]                â”‚
â”‚   â”œâ”€ Workflow Settings           â”‚
â”‚   â”œâ”€ Setup Template ğŸ”§ â­        â”‚
â”‚   â”œâ”€ Import Workflow             â”‚
â”‚   â””â”€ Export Workflow             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### In Dialog
```
Status Indicators:
ğŸ”´ Required    - Must configure
ğŸŸ¢ Configured  - Credential selected
ğŸŸ¢ Set         - Variable has value
âœ… Ready       - All complete
âš ï¸ Incomplete  - Missing items
```

---

## ğŸ’¡ Usage Scenarios

### Scenario 1: New Workflow Setup
```
1. Create new workflow
2. Add nodes (OpenAI, HTTP Request, etc.)
3. Click "..." â†’ "Setup Template"
4. See what's needed
5. Configure everything
6. Save
7. Start using workflow immediately
```

### Scenario 2: Update Credentials
```
1. Open existing workflow
2. Click "..." â†’ "Setup Template"
3. Change credential selection
4. Save
5. Workflow updated with new credentials
```

### Scenario 3: Change Variables
```
1. Open workflow
2. Click "..." â†’ "Setup Template"
3. Update variable values
4. Save
5. All nodes updated with new values
```

### Scenario 4: Duplicate & Reconfigure
```
1. Duplicate workflow
2. Open duplicate
3. Click "..." â†’ "Setup Template"
4. Change credentials/variables for new environment
5. Save
6. Ready to use in new environment
```

---

## ğŸ”§ Technical Details

### What Gets Updated

**Credentials**:
```typescript
// Before save
node.parameters.authentication = undefined

// After save
node.parameters.authentication = "credential-id-123"
```

**Variables**:
```typescript
// Before save
node.parameters.url = "https://api.example.com/{{endpoint}}"

// After save (endpoint = "users")
node.parameters.url = "https://api.example.com/users"
```

### Reload Behavior

After saving:
1. Success notification appears
2. Dialog closes
3. Page reloads (`window.location.reload()`)
4. Workflow loads with updated configuration
5. All nodes reflect changes

**Why reload?**
- Ensures React state syncs with backend
- Prevents stale data issues
- Guarantees UI shows correct values

---

## âœ… Verification Steps

### After Configuration

1. **Check Node Parameters**:
   ```
   Open any node â†’ Parameters tab
   â†“
   Verify "Authentication" field has credential
   Verify variables are replaced
   ```

2. **Test Execution**:
   ```
   Click "Execute" button
   â†“
   Workflow should run successfully
   No credential errors
   ```

3. **Check Multiple Nodes**:
   ```
   If multiple nodes use same credential
   â†“
   Open each node
   Verify all have credential set
   ```

---

## ğŸš¨ Troubleshooting

### Problem: Save button disabled
**Solution**: 
- Check all required fields are filled
- Look for red "Required" badges
- Fill in missing credentials/variables

### Problem: Changes not visible after save
**Solution**:
- Wait for page reload to complete
- Check browser console for errors
- Try manual refresh (F5)

### Problem: Credential not in dropdown
**Solution**:
- Go to Credentials page
- Create the credential
- Return to workflow
- Refresh page
- Try again

### Problem: Variable not replaced
**Solution**:
- Check variable name matches exactly
- Ensure using `{{variableName}}` syntax
- Verify variable is in node parameters
- Check for typos

---

## ğŸ“š Related Features

### Also Available in Workflows List
```
Workflows Page â†’ Click "..." on workflow
  â”œâ”€ View Template (read-only)
  â””â”€ Setup Template (interactive)
```

### Workflow Settings
```
Toolbar â†’ "..." â†’ "Workflow Settings"
  â”œâ”€ Timezone
  â”œâ”€ Execution settings
  â”œâ”€ Error handling
  â””â”€ Caller policy
```

---

## ğŸ‰ Summary

### What's New
âœ… Template setup button in workflow canvas
âœ… Direct access from editor toolbar
âœ… No need to go back to workflows list
âœ… Immediate configuration and feedback

### What's Fixed
âœ… Credentials save correctly to nodes
âœ… Variables replace properly
âœ… Changes reflect immediately
âœ… Reliable and predictable behavior

### What's Better
âœ… Faster workflow setup
âœ… Better user experience
âœ… Less context switching
âœ… More intuitive flow

**Now you can configure workflows without ever leaving the editor!** ğŸš€
