{
  "database_configuration": {
    "postgres": {
      "connection": {
        "host": "postgres",
        "port": 5432,
        "database": "${POSTGRES_DB}",
        "username": "${POSTGRES_USER}",
        "password": "${POSTGRES_PASSWORD}",
        "ssl": false,
        "connection_timeout": 30000,
        "idle_timeout": 10000,
        "max_connections": 20,
        "min_connections": 2
      },
      "connection_string_template": "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}",
      "connection_string_with_options": "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?connect_timeout=30&pool_timeout=30&pool_max=20&pool_min=2",
      "health_check": {
        "command": "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}",
        "interval": "30s",
        "timeout": "10s",
        "retries": 5,
        "start_period": "30s"
      },
      "backup_configuration": {
        "enabled": true,
        "schedule": "0 2 * * *",
        "retention_days": 7,
        "backup_command": "pg_dump -U ${POSTGRES_USER} -d ${POSTGRES_DB} | gzip > /backups/backup_$(date +%Y%m%d_%H%M%S).sql.gz"
      },
      "performance_tuning": {
        "shared_buffers": "256MB",
        "effective_cache_size": "1GB",
        "maintenance_work_mem": "64MB",
        "checkpoint_completion_target": "0.9",
        "wal_buffers": "16MB",
        "default_statistics_target": "100"
      }
    },
    "redis": {
      "connection": {
        "host": "redis",
        "port": 6379,
        "password": null,
        "database": 0,
        "connection_timeout": 5000,
        "command_timeout": 5000,
        "retry_attempts": 3,
        "retry_delay": 1000
      },
      "connection_string_template": "redis://redis:6379",
      "connection_string_with_options": "redis://redis:6379/0?connect_timeout=5000&command_timeout=5000",
      "health_check": {
        "command": "redis-cli ping",
        "interval": "30s",
        "timeout": "10s",
        "retries": 5,
        "start_period": "10s"
      },
      "configuration": {
        "maxmemory": "256mb",
        "maxmemory_policy": "allkeys-lru",
        "appendonly": "yes",
        "appendfsync": "everysec",
        "save": "900 1 300 10 60 10000"
      },
      "session_configuration": {
        "prefix": "sess:",
        "ttl": 86400,
        "rolling": true,
        "cookie": {
          "secure": true,
          "httpOnly": true,
          "maxAge": 86400000,
          "sameSite": "strict"
        }
      }
    }
  },
  "connection_validation": {
    "postgres": {
      "test_query": "SELECT 1",
      "migration_check": "SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_schema = 'public' AND table_name = '_prisma_migrations')",
      "user_permissions": [
        "SELECT",
        "INSERT", 
        "UPDATE",
        "DELETE",
        "CREATE",
        "DROP",
        "ALTER"
      ]
    },
    "redis": {
      "test_command": "PING",
      "info_command": "INFO server",
      "memory_check": "INFO memory"
    }
  },
  "environment_specific": {
    "production": {
      "postgres": {
        "connection_string": "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?sslmode=prefer&connect_timeout=30&pool_timeout=30",
        "pool_config": {
          "max": 20,
          "min": 5,
          "idle": 10000,
          "acquire": 30000,
          "evict": 1000
        }
      },
      "redis": {
        "connection_string": "redis://redis:6379/0",
        "cluster_mode": false,
        "sentinel_mode": false
      }
    },
    "staging": {
      "postgres": {
        "connection_string": "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?connect_timeout=30",
        "pool_config": {
          "max": 10,
          "min": 2,
          "idle": 10000,
          "acquire": 30000
        }
      },
      "redis": {
        "connection_string": "redis://redis:6379/1"
      }
    },
    "development": {
      "postgres": {
        "connection_string": "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}",
        "pool_config": {
          "max": 5,
          "min": 1
        }
      },
      "redis": {
        "connection_string": "redis://localhost:6379/0"
      }
    }
  },
  "monitoring": {
    "postgres": {
      "metrics": [
        "pg_stat_database",
        "pg_stat_user_tables", 
        "pg_stat_activity",
        "pg_locks"
      ],
      "slow_query_log": true,
      "log_min_duration_statement": 1000
    },
    "redis": {
      "metrics": [
        "info_memory",
        "info_stats",
        "info_clients",
        "info_persistence"
      ],
      "slowlog_enabled": true,
      "slowlog_max_len": 128
    }
  }
}