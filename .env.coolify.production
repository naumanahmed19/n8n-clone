# Coolify Production Environment Configuration
# This file contains production-ready environment variables for Coolify deployment
# Copy values to Coolify environment variables section

# =============================================================================
# REQUIRED SECRETS (Generate in Coolify Secrets Management)
# =============================================================================

# Database Authentication
POSTGRES_PASSWORD=__COOLIFY_SECRET_POSTGRES_PASSWORD__
POSTGRES_DB=n8n_clone
POSTGRES_USER=postgres

# Application Security
JWT_SECRET=__COOLIFY_SECRET_JWT_SECRET__
SESSION_SECRET=__COOLIFY_SECRET_SESSION_SECRET__
ENCRYPTION_KEY=__COOLIFY_SECRET_ENCRYPTION_KEY__

# =============================================================================
# REQUIRED CONFIGURATION (Set in Coolify Environment Variables)
# =============================================================================

# Domain Configuration
FRONTEND_DOMAIN=yourdomain.com
BACKEND_DOMAIN=api.yourdomain.com
CORS_ORIGIN=https://yourdomain.com
VITE_API_URL=https://api.yourdomain.com
WEBHOOK_URL=https://yourdomain.com

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=production
LOG_LEVEL=info

# Server Ports
PORT=4000
FRONTEND_PORT=3000

# Database Connection (Auto-generated)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Redis Connection (Auto-generated)
REDIS_URL=redis://redis:6379

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Authentication
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Session Configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=strict
SESSION_MAX_AGE=86400000

# CORS Configuration
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Database Pool
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE=10000
DB_POOL_ACQUIRE=30000

# Redis Configuration
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECT_TIMEOUT=5000

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_COLORIZE=false

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================

# Webhook Security
WEBHOOK_SIGNING_SECRET=__COOLIFY_SECRET_WEBHOOK_SIGNING_SECRET__
WEBHOOK_TIMEOUT=30000
WEBHOOK_MAX_RETRIES=3

# =============================================================================
# RATE LIMITING
# =============================================================================

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Form Rate Limiting
FORM_FETCH_WINDOW_MS=60000
FORM_FETCH_MAX_REQUESTS=30
FORM_SUBMIT_WINDOW_MS=900000
FORM_SUBMIT_MAX_REQUESTS=5

# Authentication Rate Limiting
AUTH_WINDOW_MS=900000
AUTH_MAX_REQUESTS=5

# =============================================================================
# FILE STORAGE
# =============================================================================

# Upload Configuration
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf
UPLOAD_DIR=/app/uploads
TEMP_DIR=/app/temp

# =============================================================================
# NGINX CONFIGURATION (Frontend)
# =============================================================================

NGINX_HOST=${FRONTEND_DOMAIN}
NGINX_CLIENT_MAX_BODY_SIZE=10m
NGINX_PROXY_TIMEOUT=60s
NGINX_GZIP_ENABLED=true

# =============================================================================
# OPTIONAL EXTERNAL SERVICES
# =============================================================================

# Email Configuration (Optional)
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=
# SMTP_FROM=noreply@yourdomain.com
# SMTP_SECURE=true

# File Storage (Optional - AWS S3)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=
# AWS_S3_ENDPOINT=

# Monitoring (Optional)
# SENTRY_DSN=
# ANALYTICS_ID=
# DATADOG_API_KEY=

# =============================================================================
# COOLIFY SPECIFIC CONFIGURATION
# =============================================================================

# Coolify Labels
COOLIFY_PROJECT_NAME=n8n-clone
COOLIFY_ENVIRONMENT=production
COOLIFY_AUTO_DEPLOY=true
COOLIFY_BUILD_PACK=docker-compose

# Health Check Endpoints
COOLIFY_HEALTH_CHECK_FRONTEND=/health
COOLIFY_HEALTH_CHECK_BACKEND=/health

# SSL Configuration
COOLIFY_SSL_ENABLED=true
COOLIFY_SSL_REDIRECT=true
COOLIFY_SSL_HSTS=true

# Backup Configuration
COOLIFY_BACKUP_ENABLED=true
COOLIFY_BACKUP_SCHEDULE=0 2 * * *
COOLIFY_BACKUP_RETENTION=7